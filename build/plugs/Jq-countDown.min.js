/*! singer version:0.1.0 2014-10-04 15:06:47 */
!function($){String.prototype.format=function(){if(arguments.length<=0)return this;var a=this;if(1===arguments.length&&"object"==typeof arguments[0])for(var b in arguments[0]){var c=new RegExp("\\{"+b+"\\}","gi");a=a.replace(c,arguments[0][b])}else for(var d=0;d<arguments.length;d++){var c=new RegExp("\\{"+d+"\\}","gi");a=a.replace(c,arguments[d])}return a};var def={},timer,errors={"-1":"样品试销活动未开启！","-2":"样品试销活动已结束！"},getLeft=function(a){var b={};if("string"==typeof a&&(a=new Date(a)),!(a instanceof Date))return b.code=-1,b;var c=a-new Date;if(0>c)return b.code=-2,b;var d=c/864e5;b.dd=parseInt(d);var e=d-b.dd;return b.hh=parseInt(24*e),e=24*e-b.hh,b.mm=parseInt(60*e),e=60*e-b.mm,b.ss=parseInt(60*e),e=60*e-b.ss,b.ms=parseInt(60*e),b};$.fn.countDown=function(opt){opt=$.extend(def,opt||{});var $t=$(this),dc,date,cf=$t.data("config");cf&&(dc=eval("("+cf+")")),dc&&dc instanceof Object&&(opt=$.extend(dc,opt||{})),date=opt.date,"string"==typeof date&&(date=new Date(opt.date.replace(/-/gi,"/")));var tmp=opt.tmp||$t.html()||"还剩<em>{dd}</em>天<em>{hh}</em>小时<em>{mm}</em>分<em>{ss}</em>秒 结束";timer=setInterval(function(){var a=getLeft(date);return a?void(a.code<0?($t.html(errors[a.code]),clearInterval(timer)):$t.html(tmp.format(a))):(clearInterval(timer),!1)},500)}}(jQuery);