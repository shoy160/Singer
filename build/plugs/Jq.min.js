/*! singer version:0.1.0 2014-03-05 14:35:05 */
!function($){String.prototype.format=function(){if(arguments.length<=0)return this;var a=this;if(1===arguments.length&&"object"==typeof arguments[0])for(var b in arguments[0]){var c=new RegExp("\\{"+b+"\\}","gi");a=a.replace(c,arguments[0][b])}else for(var d=0;d<arguments.length;d++){var c=new RegExp("\\{"+d+"\\}","gi");a=a.replace(c,arguments[d])}return a};var def={},timer,errors={"-1":"样品试销活动未开启！","-2":"样品试销活动已结束！"},getLeft=function(a){var b={};if("string"==typeof a&&(a=new Date(a)),!(a instanceof Date))return b.code=-1,b;var c=a-new Date;if(0>c)return b.code=-2,b;var d=c/864e5;b.dd=parseInt(d);var e=d-b.dd;return b.hh=parseInt(24*e),e=24*e-b.hh,b.mm=parseInt(60*e),e=60*e-b.mm,b.ss=parseInt(60*e),e=60*e-b.ss,b.ms=parseInt(60*e),b};$.fn.countDown=function(opt){opt=$.extend(def,opt||{});var $t=$(this),dc,date,cf=$t.data("config");cf&&(dc=eval("("+cf+")")),dc&&dc instanceof Object&&(opt=$.extend(dc,opt||{})),date=opt.date,"string"==typeof date&&(date=new Date(opt.date.replace(/-/gi,"/")));var tmp=opt.tmp||$t.html()||"还剩<em>{dd}</em>天<em>{hh}</em>小时<em>{mm}</em>分<em>{ss}</em>秒 结束";timer=setInterval(function(){var a=getLeft(date);return a?(a.code<0?($t.html(errors[a.code]),clearInterval(timer)):$t.html(tmp.format(a)),void 0):(clearInterval(timer),!1)},500)}}(jQuery),jQuery.lazyLoad=function(a){function b(){o||(o=!0,setTimeout(function(){c()},a.execute),f())}function c(){o=!1}function d(){f()}function e(a){for(m=$(a),n=0;0>=n;)n=parseInt(m.offset().top),m=m.parent();return a._lazzOffsetTop=n,a}function f(){if(!k.length)return l.unbind("scroll.lazyLoad resize.lazyLoad"),void 0;if(i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,j=i+l.scrollTop()+a.prePixel,!(q>j)){q=j;var b,c;if(j>=p-50){for(b=0;b<k.length;b++)c=k[b],c.setAttribute("src",c.getAttribute(a.source)),c.removeAttribute(a.source);return k.splice(0),l.unbind("scroll.lazyLoad resize.lazyLoad"),void 0}for(b=0;b<k.length;b++)c=k[b],c._lazzOffsetTop<j&&(c.src=c.getAttribute(a.source),c.removeAttribute(a.source),k.splice(b--,1))}}var g={execute:50,source:"lazy-src",prePixel:60,selector:["img[lazy-src]"],exclude:[],auto:!1,holderImg:"http://www.img.100hg.com/blank.gif",loadingImg:"http://www.img.100hg.com/H-loading.gif",errImg:"http://www.img.100hg.com/100hg.gif"};a=$.extend(g,a);var h,i,j,k=[],l=$(window);!function(){var c=$(a.selector[0]);for(h=1;h<a.selector.length;h++)c=c.add(a.selector[h]);for(h=0;h<a.exclude.length;h++)c=c.not(a.exclude[h]);c.each(function(){"img"==this.tagName.toLowerCase()&&this.getAttribute(a.source)&&(a.holderImg&&this.setAttribute("src",a.holderImg),a.loadingImg&&$(this).addClass("lazy-loading"),k.push(e(this))),$(k).bind("error.lazyLoad",function(){a.holderImg&&(this.setAttribute("raw-src",this.src),this.src=a.holderImg),a.errImg&&$(this).removeClass("lazy-loading").addClass("image-error")})}),$(window).bind("scroll.lazyLoad resize.lazyLoad",function(){a.execute>0?b():d()}),g.auto&&f()}();var m,n,o=!1,p=$(document).height(),q=0;!function(){var b="";a.loadingImg&&(b+=".lazy-loading{background:url("+a.loadingImg+") no-repeat scroll 50% 50% transparent}"),a.errImg&&(b+=".image-error{background:url("+a.errImg+") no-repeat scroll 50% 50% transparent}"),b&&(b='<style type="text/css">'+b+"</style>",$("head").append(b))}()};var lazy={images:[],"default":{execute:50,source:"lazy-src",prePixel:60,auto:!1,holderImg:"http://www.img.100hg.com/blank.gif",loadingImg:"http://www.img.100hg.com/H-loading.gif",errImg:"http://www.img.100hg.com/100hg.gif"},config:function(a){return $.extend(lazy.default,a||{})},add:function(a){var b=$.extend({selector:["img"],exclude:[]},a||{});!function(){function a(a){for(d=$(a),e=0;0>=e;)e=parseInt(d.offset().top),d=d.parent();return a._lazzOffsetTop=e,a}var c,d,e,f=$(b.selector[0]),g=lazy.config(),h=[];for(c=1;c<b.selector.length;c++)f=f.add(b.selector[c]);for(c=0;c<b.exclude.length;c++)f=f.not(b.exclude[c]);f.each(function(){"img"==this.tagName.toLowerCase()&&this.getAttribute(g.source)&&(g.holderImg&&this.setAttribute("src",g.holderImg),g.loadingImg&&(this.style.background='url("'+g.loadingImg+'") no-repeat scroll 50% 50% transparent'),h.push(a(this)))}),lazy.images.push(h),$(h).bind("error.lazyLoad",function(){this.setAttribute("raw-src",this.src),this.src=g.holderImg,this.style.background='url("'+g.errImg+'") no-repeat scroll 50% 50% transparent'})}(),lazy.load()},Load:function(){function a(){h||(h=!0,setTimeout(function(){b()},f.execute),d())}function b(){h=!1}function c(){d()}function d(){if(!lazy.images.length)return e.unbind("scroll.lazyLoad resize.lazyLoad"),void 0;var a=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,b=a+e.scrollTop()+f.prePixel;if(!(g>b)){g=b;var c,d;if(b>=b-50){for(c=0;c<lazy.images.length;c++)d=lazy.images[c],d.setAttribute("src",d.getAttribute(s.source)),d.removeAttribute(s.source);return lazy.images.splice(0),e.unbind("scroll.lazyLoad resize.lazyLoad"),void 0}for(c=0;c<lazy.images.length;c++)d=lazy.images[c],d._lazzOffsetTop<b&&(d.src=d.getAttribute(s.source),d.removeAttribute(s.source),lazy.images.splice(c--,1))}}var e=$(window),f=lazy.config(),g=($(document).height(),0),h=!1;!function(){e.bind("scroll.lazyLoad resize.lazyLoad",function(){f.execute>0?a():c()}),f.auto&&d()}()}};!function(a){a.prototype.lineSlide=function(b){b=a.extend({lineHeight:30,lazySrc:"lsrc"},b);var c=$(this),d=[];c.each(function(){var c=a(this).find("img["+b.lazySrc+"]");d.push(c)}),c.parent().css("position","relative"),c.not(c.eq(0)).hide();var e=a('<div class="line-arrow"><b></b><s></s></div>'),f=a('<div class="line-slide"><div class="b"></div></div>');f.append(e);for(var g=0;g<c.length;g++){var h=c.eq(g).data("header");f.append('<div class="line-item'+(0==g?" current":"")+'"><h2>'+h+"</h2><b></b><s></s></div>")}c.eq(0).before(f);var i=function(a){var c=d[a];c.loaded||(c.each(function(){this.setAttribute("src",this.getAttribute(b.lazySrc)),this.removeAttribute(b.lazySrc)}),d[a].loaded=!0)};i(0),f.find(".line-item h2").hover(function(){var a=$(this).parent(),b=f.find(".line-item").index(a);a.siblings(".line-item").removeClass("current"),e.animate({left:a.width()*b+"px"},200,function(){a.siblings(".line-item").removeClass("current"),a.addClass("current");var d=c.eq(b);i(b),c.not(d).hide(),d.show()})},function(){})}}(jQuery),function(a){var b={lazySrc:"hsrc",prePix:100,auto:!1,loadClass:""};a.prototype.shoyLazy=function(c){c=a.extend(b,c);var d,e,f,g,h,i=a(this),j=a(window),k=a(document),l=0;h=function(){j.unbind("scroll.shoyLazy resize.shoyLazy")},d=function(b){var d=a(b);c.loadClass&&d.addClass(c.loadClass);for(var e=0;0>=e;)e=parseInt(d.offset().top),d=d.parent();return b.lazySrc=c.lazySrc,b.lazyTop=e,b},f=function(a){a.setAttribute("src",a.getAttribute(a.lazySrc)),a.removeAttribute(a.lazySrc)},e=function(){var a=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;if(a+=j.scrollTop()+c.prePix,!(l>a)){if(l=a,!lazyDoms.length)return h(),void 0;if(g-c.prePix<a){for(var b=0;b<lazyDoms.length;b++)f(lazyDoms[b]);return lazyDoms.splice(0),h(),void 0}for(var b=0;b<lazyDoms.length;b++)lazyDoms[b].lazyTop<a&&(f(lazyDoms[b]),lazyDoms.splice(b--,1))}},k.ready(function(){h(),window.lazyDoms&&window.lazyDoms.length||(window.lazyDoms=[]),i.each(function(){"img"===this.tagName.toLowerCase()&&this.getAttribute(c.lazySrc)&&lazyDoms.push(d(this))}),g=k.height(),j.bind("scroll.shoyLazy resize.shoyLazy",function(){e()}),c.auto&&e()})}}(jQuery),function($){var def={max:5,init:3};$.fn.stars=function(opt){var o=$.extend(def,opt||{}),$t=$(this),cf,df=$t.data("config");df&&(cf=eval("("+df+")")),"object"==typeof cf&&(o=$.extend(o,cf||{}))}}(jQuery);