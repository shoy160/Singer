var singer=SINGER=window.SINGER=function(i){var s,t=0,o={debug:10,info:20,warn:30,error:40};return(s={__BUILD_TIME:"2014-10-04",Env:{host:this},Config:{debug:!0,loggerLevel:"debug",fns:{}},Version:"0.2.2",is:function(e,t){return"finite"===(t=t.toLowerCase())?!{NaN:1,Infinity:1,"-Infinity":1}.hasOwnProperty(+e):"array"===t?e instanceof Array:(i!==e||"undefined"===t)&&("null"===t&&null===e||t===typeof e&&null!==e||"object"===t&&e===Object(e)||"array"===t&&Array.isArray&&Array.isArray(e)||Object.prototype.toString.call(e).slice(8,-1).toLowerCase()===t)},isBoolean:function(e){return s.is(e,"boolean")},isDate:function(e){return s.is(e,"date")},isRegExp:function(e){return s.is(e,"regexp")},isObject:function(e){return s.is(e,"object")},isArray:function(e){return s.is(e,"array")},isNumber:function(e){return s.is(e,"number")},isFunction:function(e){return s.is(e,"function")},isNull:function(e){return s.is(e,"null")},isString:function(e){return s.is(e,"string")},isEmpty:function(e){return""===e||s.isNull(e)},isUndefined:function(e){return s.is(e,"undefined")},config:function(e,t){var n,r,i=s.Config,o=i.fns;if(s.isObject(e))for(var a in e)e.hasOwnProperty(a)&&(i[a]=e[a]);else n=o[e],s.isUndefined(t)?r=n?n.call(this):i[e]:n?r=n.call(this,t):i[e]=t;return r},log:function(e,t,n){if(!s.Config.debug)return i;if((o[s.Config.loggerLevel]||1e3)>o["log"===t?"debug":t])return"min level";var r=!1;return n&&((r=s.isObject(e))||(e=n+": "+e)),"undefined"!=typeof console&&console.log?(r&&console[t&&console[t]?t:"log"](n+":"),console[t&&console[t]?t:"log"](e),e):void 0},getLogger:function(e){return function(n){var r={};for(var e in o)o.hasOwnProperty(e)&&function(e,t){r[t]=function(e){return s.log(e,t,n)}}(0,e);return r}(e)},guid:function(e){return(e||"")+t++},_mix:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Logger:{}}).Logger.Level={DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error"},s}();!function(c,e){var t=Array.prototype,i=t.indexOf,o=t.lastIndexOf,a=void 0;c._mix(c,{each:function(e,t,n){if(e){var r,i,o,a=0,s=e&&e.length;if(n=n||null,c.isUndefined(s)||c.isFunction(e))for(o=c.keys(e);a<o.length&&(r=o[a],!1!==t.call(n,e[r],r,e));a++);else for(i=e[0];a<s&&!1!==t.call(n,i,a,e);i=e[++a]);}return e},index:function(e,t,n){if(i)return n===a?i.call(t,e):i.call(t,e,n);for(var r=n||0;r<t.length&&t[r]!==e;r++);return r},lastIndex:function(e,t,n){if(o)return n===a?o.call(t,e):o.call(t,e,n);n===a&&(n=t.length-1);for(var r=n;0<=r&&t[r]!==e;r--);return r},inArray:function(e,t){return 0<=c.index(e,t)},find:function(e,n,r){var i=null;return c.each(e,function(e,t){if(n.call(r,e,t))return i=e,!1}),i},filter:function(e,n,r){var i=[];return c.each(e,function(e,t){n.call(r,e,t)&&i.push(e)}),i}})}(SINGER),function(a){var e=Date.prototype,n=a.getLogger("lang.date");e.addDays=e.addDays||function(e){return this.setDate(this.getDate()+e),this};var s=["星期天","星期一","星期二","星期三","星期四","星期五","星期六"];e.format=e.format||function(e){if("soon"===e||"week"===e){var t=this.left();if(console.log(t),t.dd<5){var n="",r=a.now().getDate()-this.getDate();if(0==t.dd&&0!=r&&(t.status=r<0,t.dd=1),0<t.dd){if(1==t.dd)return(t.status?"明天":"昨天")+this.format(" hh:mm");if("week"==e)return s[this.getDay()];n=t.dd+"天"}else if(0<t.hh)n=t.hh+"小时";else if(0<t.mm)n=t.mm+"分钟";else{if(!(10<t.ss))return"刚刚";n=t.ss+"秒"}return n+(t.status?"后":"前")}e="yyyy-MM-dd"}if("date"===e)return this;var i={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var o in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+o+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?i[o]:("00"+i[o]).substr((""+i[o]).length)));return e},e.left=function(e){var t={status:!0},n=this-(e||new Date);n<0&&(t.status=!1,n=Math.abs(n));var r=n/864e5;t.dd=1<r?parseInt(r):0;var i=r-t.dd,o=24*i;return t.hh=1<o?parseInt(o):0,o=60*(i=24*i-t.hh),t.mm=1<o?parseInt(o):0,o=60*(i=60*i-t.mm),t.ss=1<o?parseInt(o):0,o=1e3*(i=60*i-t.ss),t.ms=1<o?parseInt(o):0,t},a._mix(a,{nowTick:Date.now||function(){return+new Date},now:function(){return new Date(a.nowTick())},parseDate:function(t){if(a.isDate(t)||!t)return t;try{if(a.isString(t)&&/Date\((\d+)\)/gi.test(t)&&(t=new Date(1*RegExp.$1)),a.isNumber(t))return new Date(t);if(a.isString(t))return new Date(t.replace("-","/"))}catch(e){return n.error(a.format("{0} parse to date error",t),e),t}},addDays:function(e,t){return a.isDate(e)?(t=a.isNumber(t)?t:0,new Date(e.addDays(t))):a.now()},formatDate:function(e,t){return a.isString(e)&&/Date\((\d+)\)/gi.test(e)&&(e=new Date(1*RegExp.$1)),a.isDate(e)?(t=t||"yyyy-MM-dd",e.format(t)):e},leftTime:function(e,t){return(e=a.parseDate(e)).left(t)}})}(SINGER),function(s){s._mix(s,{later:function(e,t,n,r,i){var o,a;return t=t||0,s.isString(e)&&(e=r[e]),e||s.error("fn is undefined"),a=e,r&&(a=function(){e.apply(r,i)}),{timer:o=n?setInterval(a,t):setTimeout(a,t),isInterval:n,cancel:function(){this.isInterval?clearInterval(o):clearTimeout(o)}}}})}(SINGER),function(S){S.json=function(json){if(S.isEmpty(json))return json;if(S.isObject(json)){if(Date===json.constructor)return"'new Date("+json.valueOf()+")'";var fmt=function(e){return S.isObject(e)&&null!=e?S.json(e):S.isString(e)||S.isNumber(e)?"'"+e+"'":e},arr=[],arrItem;return S.isArray(json)?(S.each(json,function(t){S.isNumber(t)?arr.push(t):S.isString(t)?arr.push("'"+t+"'"):S.isArray(t)?arr.push(S.json(t)):(arrItem=[],S.each(S.keys(t),function(e){arrItem.push("'"+e+"':"+fmt(t[e]))}),arr.push("{"+arrItem.join(",")+"}"))}),"["+arr.join(",")+"]"):(S.each(S.keys(json),function(e){arr.push("'"+e+"':"+fmt(json[e]))}),"{"+arr.join(",")+"}")}return S.isString(json)?(json=json.replace(/'(new Date\(\d+\))'/gi,"$1"),eval("("+json+")")):void 0}}(SINGER),function(f){var l="__MIX_CIRCULAR",i=!{toString:1}.propertyIsEnumerable("toString"),o=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","toLocaleString","valueOf"];function d(e,t,n,r,i,o){if(!t||!e)return t;var a,s,c,u;for(t[l]=e,o.push(t),u=(c=f.keys(t)).length,a=0;a<u;a++)(s=c[a])!==l&&g(s,e,t,n,r,i,o);return e}function g(e,t,n,r,i,o,a){if(r||!(e in t)||o){var s=t[e],c=n[e];if(s===c)return void(void 0===s&&(t[e]=s));if(i&&(c=i.call(n,e,c)),o&&c&&(f.isArray(c)||f.isObject(c)))if(c[l])t[e]=c[l];else{var u=s&&(f.isArray(s)||f.isObject(s))?s:f.isArray(c)?[]:{};d(t[e]=u,c,r,i,!0,a)}else void 0===c||!r&&e in t||(t[e]=c)}}f._mix(f,{keys:Object.keys||function(e){var t,n,r=[];for(t in e)e.hasOwnProperty(t)&&r.push(t);if(i)for(n=o.length-1;0<=n;n--)t=o[n],e.hasOwnProperty(t)&&r.push(t);return r},mix:function(e,t,n,r,i){if(n&&f.isObject(n)&&(r=n.whiteList,i=n.deep,n=n.overwrite),r&&!f.isFunction(r)){var o=r;r=function(e,t){return f.inArray(e,o)?t:void 0}}void 0===n&&(n=!0);var a,s=[],c=0;for(d(e,t,n,r,i,s);a=s[c++];)delete a[l];return e},clone:function(e){var t;for(var n in t=e.constructor===Object?new e.constructor:new e.constructor(e.valueOf()),e)e.hasOwnProperty(n)&&t[n]!=e[n]&&("object"==typeof e[n]?t[n]=e[n].clone():t[n]=e[n]);return t.toString=e.toString,t.valueOf=e.valueOf,t}})}(SINGER),function(o,e){var t=/^[\s\xa0]+|[\s\xa0]+$/g,n=String.prototype.trim,r=/\\?\{([^{}]+)\}/g;o._mix(o,{trim:function(e){return o.isEmpty(e)?e:n?n.call(e):(e+"").replace(t,"")},lenCn:function(e){return o.isString(e)?e.replace(/[\u4e00-\u9fa5]/g,"**").length:0},subCn:function(e,t,n){if(o.lengthCn(e)<=t)return e.toString();for(var r=0;r<e.length;r++)if(o.lengthCn(this.substr(0,r))>=t)return e.substr(0,r)+(n||"...");return e},clearTags:function(e,t,n){var r;return r=(t=t||"")?n?new RegExp("<"+t+"[^>]*>([\\S\\s]*?)</"+t+">","gi"):new RegExp("</?"+t+"[^>]*>","gi"):new RegExp("</?[0-9a-z]+[^>]*>","gi"),e.replace(r,"")},clearScript:function(e){return o.clearTags(e,"script",!0)},clearTrn:function(e){return e.replace(/[\r\n\t]/g,"")},isMobile:function(e){return/^(1[3456789]\d{9})$/.test(o.trim(e))},isTelephone:function(e){return/((0[1-9]{2,3}[\s-]?)?\d{7,8})/gi.test(o.trim(e))},substitute:function(e,n,t){return o.isString(e)&&n?e.replace(t||r,function(e,t){return"\\"===e.charAt(0)?e.slice(1):void 0===n[t]?"":n[t]}):e},ucFirst:function(e){return(e+="").charAt(0).toUpperCase()+e.substring(1)},startsWith:function(e,t){return 0===e.lastIndexOf(t,0)},endsWith:function(e,t){var n=e.length-t.length;return 0<=n&&e.indexOf(t,n)===n},format:function(e){if(arguments.length<=1)return e||"";var t,n=e;if(2===arguments.length&&o.isObject(arguments[1]))for(var r in arguments[1])arguments[1].hasOwnProperty(r)&&(t=new RegExp("\\{"+r+"\\}","gi"),n=n.replace(t,arguments[1][r]));else for(var i=1;i<arguments.length;i++)t=new RegExp("\\{"+(i-1)+"\\}","gi"),n=n.replace(t,arguments[i]);return n},padLeft:function(e,t,n){n=o.isUndefined(n)?"0":n;for(var r=String(e);r.length<t;)r=n+r;return r},padRight:function(e,t,n){n=o.isUndefined(n)?"0":n;for(var r=String(e);r.length<t;)r+=n;return r}})}(SINGER),SINGER,function(e){var t=SINGER.Env.host,h=t.document,n=t.navigator,r=n&&n.userAgent||"";function p(e){var t=0;return parseFloat(e.replace(/\./g,function(){return 0==t++?".":""}))}function m(e,t){var n,r;t[n="trident"]=.1,(r=e.match(/Trident\/([\d.]*)/))&&r[1]&&(t[n]=p(r[1])),t.core=n}function v(e){var t,n;return(t=e.match(/MSIE ([^;]*)|Trident.*; rv(?:\s|:)?([0-9.]+)/))&&(n=t[1]||t[2])?p(n):0}function i(e){var t,n,r,i,o,a="",s="",c=[6,9],u="{{version}}",f="\x3c!--[if IE "+u+"]><s></s><![endif]--\x3e",l=h&&h.createElement("div"),d=[],g={webkit:void 0,trident:void 0,gecko:void 0,presto:void 0,chrome:void 0,safari:void 0,firefox:void 0,ie:void 0,ieMode:void 0,opera:void 0,mobile:void 0,core:void 0,shell:void 0,phantomjs:void 0,os:void 0,ipad:void 0,iphone:void 0,ipod:void 0,ios:void 0,android:void 0,nodejs:void 0};if(l&&l.getElementsByTagName&&(l.innerHTML=f.replace(u,""),d=l.getElementsByTagName("s")),0<d.length){for(m(e,g),i=c[0],o=c[1];i<=o;i++)if(l.innerHTML=f.replace(u,i),0<d.length){g[s="ie"]=i;break}!g.ie&&(r=v(e))&&(g[s="ie"]=r)}else(n=e.match(/AppleWebKit\/([\d.]*)/))&&n[1]?(g[a="webkit"]=p(n[1]),(n=e.match(/OPR\/(\d+\.\d+)/))&&n[1]?g[s="opera"]=p(n[1]):(n=e.match(/Chrome\/([\d.]*)/))&&n[1]?g[s="chrome"]=p(n[1]):(n=e.match(/\/([\d.]*) Safari/))&&n[1]&&(g[s="safari"]=p(n[1])),/ Mobile\//.test(e)&&e.match(/iPad|iPod|iPhone/)?(g.mobile="apple",(n=e.match(/OS ([^\s]*)/))&&n[1]&&(g.ios=p(n[1].replace("_","."))),t="ios",(n=e.match(/iPad|iPod|iPhone/))&&n[0]&&(g[n[0].toLowerCase()]=g.ios)):/ Android/i.test(e)?(/Mobile/.test(e)&&(t=g.mobile="android"),(n=e.match(/Android ([^\s]*);/))&&n[1]&&(g.android=p(n[1]))):(n=e.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))&&(g.mobile=n[0].toLowerCase()),(n=e.match(/PhantomJS\/([^\s]*)/))&&n[1]&&(g.phantomjs=p(n[1]))):(n=e.match(/Presto\/([\d.]*)/))&&n[1]?(g[a="presto"]=p(n[1]),(n=e.match(/Opera\/([\d.]*)/))&&n[1]&&(g[s="opera"]=p(n[1]),(n=e.match(/Opera\/.* Version\/([\d.]*)/))&&n[1]&&(g[s]=p(n[1])),(n=e.match(/Opera Mini[^;]*/))&&n?g.mobile=n[0].toLowerCase():(n=e.match(/Opera Mobi[^;]*/))&&n&&(g.mobile=n[0]))):(r=v(e))?(g[s="ie"]=r,m(e,g)):(n=e.match(/Gecko/))&&(g[a="gecko"]=.1,(n=e.match(/rv:([\d.]*)/))&&n[1]&&(g[a]=p(n[1]),/Mobile|Tablet/.test(e)&&(g.mobile="firefox")),(n=e.match(/Firefox\/([\d.]*)/))&&n[1]&&(g[s="firefox"]=p(n[1])));return t||(/windows|win32/i.test(e)?t="windows":/macintosh|mac_powerpc/i.test(e)?t="macintosh":/linux/i.test(e)?t="linux":/rhino/i.test(e)&&(t="rhino")),g.os=t,g.core=g.core||a,g.shell=s,g.ieMode=g.ie&&h.documentMode||g.ie,g}var o,a,s=SINGER.UA=i(r);"object"==typeof process&&((o=process.versions)&&(a=o.node)&&(s.os=process.platform,s.nodejs=p(a)));s.getDescriptorFromUserAgent=i}(),function(a){var t=/^(\/?)([\s\S]+\/(?!$)|\/)?((?:\.{1,2}$|[\s\S]+?)?(\.[^.\/]*)?)$/;a._mix(a,{uri:function(e){var t,n=[];if(0<=(t=e?e+"":location.search).indexOf("?")&&(t=t.substring(1)),t&&(t=t.split("&")),0<t.length)for(var r=0;r<t.length;r++){var i=t[r].split("=");n[i[0]]=decodeURIComponent(i[1])}return n},cookie:{set:function(e,t,n,r){if("string"==typeof e&&""!==a.trim(e)){var i=e+"="+encodeURI(t);if("number"==typeof n&&0<n){var o=(new Date).getTime()+6e4*n;i+=";expires="+new Date(o).toGMTString()}"string"==typeof r&&(i+=";domain="+r),document.cookie=i+"; path=/"}},get:function(e){var t=document.cookie,n=e+"=",r=t.indexOf("; "+n);if(-1==r){if(0!=(r=t.indexOf(n)))return null}else r+=2;var i=t.indexOf(";",r);return-1==i&&(i=t.length),decodeURI(t.substring(r+n.length,i))},clear:function(e,t){this.get(e)&&(document.cookie=e+"="+(t?"; domain="+t:"")+"; expires=Thu, 01-Jan-70 00:00:01 GMT")}},stringify:function(n){if(!n||n.length||!a.isObject(n))return"";var r=[];return a.each(a.keys(n),function(e){var t=n[e];a.isObject(t)||a.isArray(t)?r.push(e+"="+encodeURIComponent(a.json(t))):r.push(e+"="+encodeURIComponent(t))}),r.join("&")},ext:function(e){return(e.match(t)||[])[4]||""}})}(SINGER),function(e){e._mix(e,{})}(SINGER),function(p){var m=document,v=p.UA,y=m.getElementsByTagName("head")[0]||m.documentElement,S={};p._mix(p,{currentScript:function(){if(document.currentScript)return document.currentScript.src;var t;try{a.b.c()}catch(e){!(t=e.stack)&&window.opera&&(t=(String(e).match(/of linked script \S+/g)||[]).join(" "))}if(t)return(t="("==(t=t.split(/[@ ]/g).pop())[0]?t.slice(1,-1):t).replace(/(:\d+)?:\d+$/i,"");for(var e,n=document.getElementsByTagName("script"),r=0;e=n[r++];)if("interactive"===e.readyState)return e.className=e.src},loadScript:function(r,e,t){var n,i,o,a,s,c=e,u=0;if(p.startsWith(p.ext(r).toLowerCase(),".css")&&(u=1),p.isObject(c)&&(e=c.success,n=c.error,i=c.attrs,o=c.timeout,t=c.charset),(a=S[r]=S[r]||[]).push([e,n]),1<a.length)return a.node;var f=m.createElement(u?"link":"script");i&&p.each(i,function(e,t){"async"!=t.toLowerCase()||p.isUndefined(f.async)?f.setAttribute(t,e):f.async=e}),t&&(f.charset=t),u?(f.href=r,f.rel="stylesheet"):(f.src=r,f.async=!0),a.node=f;var l=function(e){var t,n=e;s&&(s.cancel(),s=void 0),p.each(S[r],function(e){(t=e[n])&&t.call(f)}),delete S[r]},d="onload"in f,g=p.Config.forceCssPoll||v.webkit&&v.webkit<536;function h(){var e=f.readyState;e&&"loaded"!==e&&"complete"!==e||(f.onreadystatechange=f.onload=null,l(0))}return u&&g&&d&&(d=!1),d?(f.onload=h,f.onerror=function(){f.onerror=null,l(1)}):u||(f.onreadystatechange=h),o&&(s=p.later(function(){l(1)},1e3*o)),u?y.appendChild(f):y.insertBefore(f,y.firstChild),f}})}(SINGER);